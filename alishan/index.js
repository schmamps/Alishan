var alishan=function(e){"use strict";const t=Math.pow(10,12);class r{constructor(e,r,n){this._word=e,this._score=((e,r)=>{const n=e/r*1.5;return Math.round(n*t)/t})(r,n)}get word(){return this._word}get score(){return this._score}toString(){return this._word}}const n=["-"," ",",",".","a","e","i","o","u","t","0","1","2","3","4","5","6","7","8","9","monday","tuesday","wednesday","thursday","friday","saturday","sunday","mon","tue","wed","thu","fri","sat","sun","january","february","march","april","may","june","july","august","september","october","november","december","about","above","above","across","after","afterwards","again","against","all","almost","alone","along","already","also","always","am","among","amongst","amoungst","amount","an","and","another","any","anyhow","anyone","anything","anyway","anywhere","are","around","as","at","back","be","became","because","become","becomes","becoming","been","before","beforehand","behind","being","below","beside","besides","between","beyond","both","bottom","but","by","call","can","cannot","can't","co","con","could","couldn't","de","describe","detail","did","do","done","down","due","during","each","eg","eight","either","eleven","else","elsewhere","empty","enough","etc","even","ever","every","everyone","everything","everywhere","except","few","fifteen","fifty","fill","find","fire","first","five","for","former","formerly","forty","found","four","from","front","full","further","get","give","go","got","had","has","hasnt","have","he","hence","her","here","hereafter","hereby","herein","hereupon","hers","herself","him","himself","his","how","however","hundred","i","ie","if","in","inc","indeed","into","is","it","its","it's","itself","just","keep","last","latter","latterly","least","less","like","ltd","made","make","many","may","me","meanwhile","might","mill","mine","more","moreover","most","mostly","move","much","must","my","myself","name","namely","neither","never","nevertheless","new","next","nine","no","nobody","none","noone","nor","not","nothing","now","nowhere","of","off","often","on","once","one","only","onto","or","other","others","otherwise","our","ours","ourselves","out","over","own","part","people","per","perhaps","please","put","rather","re","said","same","see","seem","seemed","seeming","seems","several","she","should","show","side","since","sincere","six","sixty","so","some","somehow","someone","something","sometime","sometimes","somewhere","still","such","take","ten","than","that","the","their","them","themselves","then","thence","there","thereafter","thereby","therefore","therein","thereupon","these","they","thick","thin","third","this","those","though","three","through","throughout","thru","thus","to","together","too","top","toward","towards","twelve","twenty","two","un","under","until","up","upon","us","use","very","via","want","was","we","well","were","what","whatever","when","whence","whenever","where","whereafter","whereas","whereby","wherein","whereupon","wherever","whether","which","while","whither","who","whoever","whole","whom","whose","why","will","with","within","without","would","yet","you","your","yours","yourself","yourselves","the","reuters","news","home","sports","sa","says","tweet","pm","home","homepage","sports","section","newsinfo","stories","story","photo","percent","time","us"],o=n,s=e=>{const t=e||n;return e=>!t.includes(e)},i=e=>e.toLowerCase().replace(/[^a-z0-9\.]/gi,"").trim(),a=e=>{const t="[\\.\\?\\!\\;]".replace("\\;",""),r=new RegExp("(?<="+t+"+)\\s+");return e.split(r).map(e=>e.trim()).filter(e=>!!e)},h=(e,t=!0)=>{const r=t?i:e=>e;return e.split(/[\s]+/).map(e=>e.replace(new RegExp("[\\.\\?\\!\\;]","g"),"")).map(r).filter(e=>!!e)},l=10,u=(e,t)=>{const r=1+(e.get(t)||0);return e.set(t,r),e},c=(e,t={})=>{const{minimumRank:n=l,stopWords:o}=t,i=h(e),a=((e,t)=>{const r=s(t),n=e.filter(r).reduce(u,new Map).entries();return Array.from(n)})(i,o).map(e=>({word:e[0],freq:e[1]})).map(e=>new r(e.word,e.freq,i.length)),c=((e,t)=>{const r=e.map(e=>e.score).sort((e,t)=>e>t?-1:1);return r[Math.min(t,r.length)]})(a,n);return a.filter(e=>e.score>=c)},d=(e,t={})=>{const r=c(e,t);return[r.map(e=>e.word),r.map(e=>e.score)]},m=[.17,.23,.14,.08,.05,.04,.06,.04,.04,.15];class w{constructor(e,t,r,n){if(this._text=e.trim(),this._index=Math.round(t),this._of=Math.round(r),this._score=n,this._index<0||this._of-this._index<=0)throw`Invalid index [${this._index}] (len: ${this._of})`}get text(){return this._text}get position(){return this._index+1}get of(){return this._of}get score(){return this._score}toString(){return this.text}get[Symbol.toStringTag](){const{text:e}=this,t=e.substr(0,10).trim();return`ScoredSentence('${t}${e.length>t.length?"...":""}')`}}var g=[{re:/^(.+?)(ss|i)es$/,handle:(e,t)=>e.replace(t,"$1$2")},{re:/^(.+?)([^s])s$/,handle:(e,t)=>e.replace(t,"$1$2")}];const y="[aeiouy]",f="[^aeiou][^aeiouy]*",p="[aeiouy][aeiou]*",b=`^(${f})?`,v=p+f,x={gt0:new RegExp(b+v),eq1:new RegExp(b+v+`(${p})?$`),gt1:new RegExp(b+v.repeat(2))},$=new RegExp(b+y),_=(e,t,...r)=>{try{const n=e.exec(t)||[];return(r.length?r:[1]).map(e=>n[e])}catch(n){throw[`match(es) [${r.join(", ")}]`,"not found:",`${e.toString()}.exec('${t}')`].join(" ")}},R=(e,t=1)=>{const r=new RegExp(`.{${t}}$`);return e.replace(r,"")},k=(e,t="|")=>Object.keys(e).join(t),E=(e,t,r)=>{const[n,o]=_(t,e,1,2);return x.gt0.test(n)?n+r[o]:e};var M=[{re:/^(.+?)eed$/,handle:(e,t)=>{const r=_(t,e)[0];return x.gt0.test(r)?R(e):e}},{re:/^(.+?)(ed|ing)$/,handle:(e,t)=>{const r=_(t,e)[0];return $.test(r)?/(at|bl|iz)$/.test(r)?`${r}e`:new RegExp("([^aeiouylsz])\\1$").test(r)?R(r):new RegExp(`^${f}[aeiouy][^aeiouwxy]$`).test(r)?`${r}e`:r:e}}];var j=[{re:/^(.+?)y$/,handle:(e,t)=>{const r=_(t,e)[0];return $.test(r)?r+"i":e}}];const z={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"};var S=[{re:new RegExp(`^(.+?)(${k(z)})$`),handle:(e,t)=>E(e,t,z)}];const W={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""};var O=[{re:new RegExp(`^(.+?)(${k(W)})$`),handle:(e,t)=>E(e,t,W)}];const q=(e,t)=>x.gt1.test(e)?e:t;var A=[{re:new RegExp(["^(.+?)(al|ance|ence|er|ic|able|ible|ant","|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$"].join("")),handle:(e,t)=>{const r=_(t,e)[0];return q(r,e)}},{re:/^(.+?)(s|t)(ion)$/,handle:(e,t)=>{const r=_(t,e,1,2).join("");return q(r,e)}}];var C=[{re:/^(.+?)e$/,handle:(e,t)=>{const r=_(t,e)[0];return x.gt1.test(r)||x.eq1.test(r)&&(e=>!new RegExp("^"+f+y+"[^aeiouwxy]$").test(e))(r)?r:e}}];var L=[{re:/ll$/,handle:(e,t)=>x.gt1.test(e)?R(e):e}];const I=(e,t,r)=>{for(let r of t)if(r.re.test(e)){return r.handle(e,r.re)}return e},T=e=>{if(e.length<3)return e;const t="y"===e.charAt(0),r=[g,M,j,S,O,A,C,L].reduce(I,t?"Y"+e.substr(1):e);return t?`y${r.substr(1)}`:r},V=20,Y=Math.pow(10,6),B=(e,t)=>e+t,D=(e,t,r)=>{const n=t.indexOf(e);return n<0?0:r[n]},F=(e,t,r,n)=>{if(r<1)return e;const o=n[r-1],s=t.index-o.index;return e+o.score*t.score/Math.pow(s,2)},G=(e,t)=>{const r=s(t);return h(e).filter(r).map(T)},H=(e,t,r={})=>{const{titleWords:n=G(e,t.stopWords),keys:o=d(r.body||"",t)}=r;return Object.assign(r,{titleWords:n,keys:o})},J=(e,t,r)=>{const n=((e,t)=>Array.from(new Set(e)).filter(e=>t.includes(e)).length+1)(e,t);return 1/n*(n+1)*e.map((e,n)=>({index:n,score:D(e,t,r)})).filter(e=>e.score>0).reduce(F,0)},K=(e,t)=>{const{length:r}=e;if(0===r)return r;const[n,o]=t,s=J(e,n,o);return 5*(((e,t,r,n)=>{const o=e.map(e=>D(e,t,r)).reduce(B,0);return 1/(n||e.length)*o})(e,n,o,r)+s)},N=(e,t)=>(t-Math.abs(t-e))/t,P=(e,t,r)=>{const n=r.length;return r[Math.round(Math.ceil((e+1)/t*n))-1]},Q=(e,t,r)=>{if(0===Math.min(e.length,t.length))return 0;const n=t.filter(t=>e.indexOf(t)>=0).filter(s(r)).length;return 0===n?n:n/e.length},U=(e,t,r,n,s={},i={})=>{const a=h(t),{idealLength:l=V,stopWords:u=o,positionValues:c=m}=s,{titleWords:d,keys:w}=H(e,s,i),g={keyword:K(a,w),length:N(a.length,l),title:Q(d,a,u),position:P(r,n,c)},y=((e,t,r,n)=>{const o=[1.5*n,2*e,.5*t,r].reduce(B,0);return Math.round(o/4*Y)/Y})(g.keyword,g.length,g.position,g.title);return Object.assign(g,{total:y})},X=(e,t,r)=>{const n=a(t),o=n.length,s=H(e,r,{body:t});return n.map((t,n)=>U(e,t,n,o,r,s)).map((e,t)=>new w(n[t],t,o,e))},Z=(e,t)=>t.score.total-e.score.total;return e.summarize=(e,t,r)=>t.trim().length?((e,t,r)=>{const{returnCount:n=5}=r;return X(e,t,r).sort(Z).slice(0,n).map(String)})(e,t,r):[],e}({});
